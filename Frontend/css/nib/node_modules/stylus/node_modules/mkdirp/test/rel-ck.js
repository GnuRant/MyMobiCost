var mkdirp=require("../"),path=require("path"),fs=require("fs"),test=require("tap").test;test("rel",function(e){e.plan(2);var t=Math.floor(Math.random()*Math.pow(16,4)).toString(16),n=Math.floor(Math.random()*Math.pow(16,4)).toString(16),r=Math.floor(Math.random()*Math.pow(16,4)).toString(16),i=process.cwd();process.chdir("/tmp");var s=[t,n,r].join("/");mkdirp(s,493,function(t){t?e.fail(t):path.exists(s,function(t){t?fs.stat(s,function(t,n){if(t)e.fail(t);else{process.chdir(i);e.equal(n.mode&511,493);e.ok(n.isDirectory(),"target not a directory");e.end()}}):e.fail("file not created")})})});