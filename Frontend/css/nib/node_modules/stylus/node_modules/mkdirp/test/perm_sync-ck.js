var mkdirp=require("../"),path=require("path"),fs=require("fs"),test=require("tap").test;test("sync perm",function(e){e.plan(2);var t="/tmp/"+(Math.random()*(1<<30)).toString(16)+".json";mkdirp.sync(t,493);path.exists(t,function(n){n?fs.stat(t,function(t,n){if(t)e.fail(t);else{e.equal(n.mode&511,493);e.ok(n.isDirectory(),"target not a directory");e.end()}}):e.fail("file not created")})});test("sync root perm",function(e){e.plan(1);var t="/tmp";mkdirp.sync(t,493);path.exists(t,function(n){n?fs.stat(t,function(t,n){if(t)e.fail(t);else{e.ok(n.isDirectory(),"target not a directory");e.end()}}):e.fail("file not created")})});